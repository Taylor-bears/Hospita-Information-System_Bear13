## 测试环境搭建
- 操作系统：Windows（PowerShell）
- 前端依赖安装：
  - `cd c:\Users\汪小屿\Desktop\traec\Hospita-Information-System_Bear13\medical-system\frontend`
  - `npm ci`
- 后端依赖安装（Python 3.10+，建议虚拟环境）：
  - `cd c:\Users\汪小屿\Desktop\traec\Hospita-Information-System_Bear13`
  - `python -m venv .venv && .\.venv\Scripts\Activate.ps1`
  - `pip install -r requirements.txt`（若有）或 `pip install uvicorn fastapi supabase`
- Stripe 已由你配置，无需二次变更；确认 `.env` 或配置文件中密钥已生效

## 服务启动
- 后端（任选其一路径均可，优先使用已验证的模块路径）：
  - `python -m uvicorn medical-system.backend.main:app --reload --port 8000`
- 前端：
  - `cd c:\Users\汪小屿\Desktop\traec\Hospita-Information-System_Bear13\medical-system\frontend`
  - `npm run dev`
- 访问地址：
  - 前端 `http://localhost:5173`（若端口占用，Vite 会顺延到 5174/5175/…）
  - 后端 `http://localhost:8000`

## 目标页面与功能检查
- 登录与注册（统一手机号+密码+姓名+角色）
  - 页面：`/login`（src/pages/LoginPage.tsx:34）
  - 检查：患者/医生/药房/管理员注册与登录；登录后按 `src/App.tsx:27-40` 跳转到对应仪表板
- 患者仪表板（修复验证重点）
  - 页面：`/patient/dashboard`（src/router/index.tsx:38 引用 src/pages/patient/PatientDashboard.tsx）
  - 检查：统计卡片、最近预约/处方、预约日历是否加载；Network 请求 appointments/prescriptions 200
- 医生列表与预约
  - 页面：`/patient/doctors`（src/pages/patient/DoctorListPage.tsx:36）
  - 操作：筛选医生→打开预约模态框→选择日期/时间→提交（插入 appointments）
- 我的预约
  - 页面：`/patient/appointments`（src/pages/patient/MyAppointmentsPage.tsx:28）
  - 检查：状态过滤、取消预约、查看处方（已完成且带处方时）
- 医生工作台/预约管理/处方
  - 页面：`/doctor/dashboard`（src/pages/DoctorDashboard.tsx:46）
  - 页面：`/doctor/appointments`（src/pages/DoctorAppointmentsPage.tsx:28）
  - 页面：`/doctor/prescriptions`（src/pages/DoctorPrescriptionsPage.tsx:55）
  - 操作：确认预约→完成预约（填写诊断/治疗）→创建处方（含明细与金额）
- 支付与库存扣减（Stripe）
  - 页面：`/patient/prescriptions` 与支付入口（处方状态为 pending）
  - 过程：点击“支付”→跳转 Stripe Checkout→支付成功→Webhook 置处方为已支付/可取药→药房配药扣减库存
- 药房工作台/库存管理
  - 页面：`/pharmacy/dashboard`（src/pages/pharmacy/PharmacyDashboard.tsx:26）
  - 页面：`/pharmacy/inventory`（src/pages/pharmacy/InventoryManagement.tsx）
  - 操作：查看低库存、编辑药品信息、配药日志生成
- 管理员控制台
  - 页面：`/admin/users`（src/pages/AdminUsersPage.tsx:25）
  - 页面：`/admin/schedule`（src/pages/AdminSchedulePage.tsx:35）
  - 页面：`/admin/medicines`（src/pages/AdminMedicinesPage.tsx:27）
  - 操作：医生/药师审批、创建/编辑/删除排班、药品增删改价
- AI 咨询（仅患者）
  - 页面：`/patient/ai-consult`（src/pages/patient/AiConsultPage.tsx:28）
  - 检查：发送消息→模拟分析→保存消息与咨询记录
- 支付历史
  - 页面：`/patient/payments`（src/pages/patient/PaymentHistoryPage.tsx）
  - 检查：列表过滤、详情、退款入口（成功状态）

## 控制台与网络检查
- 打开浏览器开发者工具
  - Console：无红色错误；修复后不应出现 “Element type is invalid”
  - Network：接口 200，无 CORS/401；资源（JS/CSS）无 404
- 验证 Supabase 连通性提示（非阻塞）
  - `src/App.tsx` 顶层 ping，异常时显示黄色提示条但不阻断渲染

## 兼容性与设备
- 浏览器：Chrome、Edge、Firefox
- 设备：桌面与移动端模拟（DevTools），关键路由与交互正常

## 性能采样
- 记录 FCP/LCP/TBT 基线（可用 Lighthouse 采样），确认无长任务阻塞

## 测试用例通过标准
- 路由均可进入且渲染正常；错误边界未触发
- 预约→医生确认→完成→处方→支付→药房配药整个链路打通
- 管理员审批与排班、药房库存与日志均工作
- AI 咨询记录保存与历史加载正常

## 结果记录与问题输出
- 输出每个模块的结果（加载、功能、日志）与发现的问题/异常
- 若存在问题，给出定位点（文件:行号）、复现步骤与修复建议

请确认该测试计划，我将按此执行并提交完整的本地测试结果与问题清单。